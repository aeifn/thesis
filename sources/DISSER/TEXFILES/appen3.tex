\section*{Приложение 3. К главе 3: Супермодулярные итеративные игры со 
множеством участников}

Данный раздел посвящён анализу определённого класса игр, которые всегда имеют
единственное сильное равновесие Нэша (в дальнейшем, СНР). Как следствие, мы
получим теоремы, характеризующие равновесие в нашей модели, ибо как будет
показано в следующем разделе, игра второго уровня, порождённая любой
многоступенчатой пороговой стратегией контролирующего органа, принадлежит 
данному классу. Анализируя эти игры, мы опираемся на (Topkis~1998); 
конкретно, это относится к свойствам супермодулярности и следствиям из них. 
Что же касается свойства итеративности, то насколько мне известно, оно не 
изучалось в литературе в паре с супермодулярностью. Предположения, которые 
приводят к существованию и единственности СНР, являются слишком сильными для 
того, чтобы претендовать на чисто теоретико-игровую ценность; однако они 
выполняются в ситуации, рассмотренной выше в работе.

Рассмотрим игру множества лиц, в том смысле, что индивидуальные действия
оказывают незначительное влияние на агрегированные переменные, и мы будем ими
пренебрегать\footnote{Точный смысл этих слов станет ясен ниже.}. Фактически
мы будем исходить из того, что у нас имеется бесконечное число агентов,
и они пронумерованы точками $\theta$ отрезка $[0,1]$. Кроме того, нам будет
важен естественный порядок, имеющийся на этом отрезке, и мы его сохраним и
для множества агентов тоже. Все агенты обладают одним и тем же стратегическим
множеством $Z \subset {\bf R}$, которое предполагается компактным (скажем,
некий отрезок). Обозначим за $Z^{[0,1]}$ декартово произведение континуума
экземпляров множества $Z$ (то есть, множество всех отображений отрезка $[0,1]$ 
во множество $Z$), и за $q \in Z^{[0,1]}$~--- профиль выбранных агентами 
стратегий. Каждому такому профилю ставится в соответствие кумулятивная 
функция распределения
\begin{equation}
\label{distr11}
\begin{array}{c}
F_q(z)= \mbox{ Лебегова мера множества тех } \th,
\\
\mbox{ для которых } q(\th) \le z
\end{array}
\end{equation}
(мы ограничиваемся рассмотрением измеримых профилей $q$). Множество 
$Z^{[0,1]}$ всех профилей наследует частичный порядок от множества $Z$, 
при котором
\begin{equation}
\label{order}
q_1 \succeq q_2 \Longleftrightarrow
\forall \th \quad q_1(\th) \ge q_2(\th).
\end{equation}
Оказывается, множество $Z^{[0,1]}$ вдобавок наследует некоторые хорошие
свойства упорядоченного множества $Z$.

\begin{envi}\label{lattice}
Множество $Z^{[0,1]}$ образует полную решётку относительно введённого 
выше частичного порядка. То же верно и для его подмножества $\Re \subset
Z^{[0,1]}$, состоящего из неубывающих профилей.
\end{envi}

{\bf Для доказательства} этой леммы рассмотрим произвольное подмножество
$\Re' \subset Z^{[0,1]}$ множества всех профилей. ТВГ $q^{-}$ и ТНГ $q_{-}$
этого подмножества строятся следующим образом:
\begin{equation}
\label{supinf}
\begin{array}{c}
\forall \th \quad q^{-} (\th) \, := \, \max\limits_{q \in \Re'} q(\th),
\\
\forall \th \quad q_{-} (\th) \, := \, \min\limits_{q \in \Re'} q(\th).
\end{array}
\end{equation}
Если исходное подмножество состояло из неубывающих профилей, то определённые
формулой~(\ref{supinf}) ТВГ и ТНГ тоже являются неубывающими (тривиальная
проверка). Доказательство закончено.

Заметим, что неубывающий профиль $q \in \Re$ и соответствующая ему функция 
распределения $F_q(\cdot)$ являются просто взаимно-обратными в расширенном 
смысле, то есть когда допускаются участки постоянства, с одной стороны, и 
разрывы, с другой. В дальнейшем станет ясно, что только монотонные профили
представляют для нас интерес.

Возвращаясь к определению нашей игры, предположим, что функции выигрыша, или
полезности, игроков имеют вид
\begin{equation}
\label{game}
u_{\th}(z,q) = u(\th,z,q),
\end{equation}
где $z \in Z$~--- стратегия агента $\th$. Это и есть точный смысл того, что 
мы выше назвали \лк индивидуальные действия не влияют на агрегированные
переменные\пк, потому что, осуществляя свой выбор, агент максимизирует
выигрыш по переменной $z$, принимая $q$ за константу (это предположение
сродни Вальрасовому в теории конкурентного равновесия; можно строго 
формализовать его в рамках теоретико-игрового подхода, вводя в рассмотрение
\лк вспомогательного\пк\ игрока $0$. Такой игрок обладает стратегическим
множеством $Z^{[0,1]}$, и его функция полезности всегда максимизируется на
истинном профиле выбранных стратегий).

Ниже мы вводим три определения. Предполагается, что наша игра удовлетворяет
всем трём свойствам, постулируемым в них.

{\bf\em Определение 1.} Игра~(\ref{game}) называется $SMD$-игрой (или
удовлетворяющей $SMD$-свойству, или квази-супермодулярной), если
\begin{equation}
\label{supmod}
\begin{array}{c}
\forall q \succeq q' \quad \forall \th \in [0,1] \quad \mbox{ функция }
\\
u(\th,z,q) - u(\th,z,q')
\\
\mbox{ неотрицательна и неубывает по } z.
\end{array}
\end{equation}

{\bf\em Определение 2.} Игра~(\ref{game}) называется $SMN$-игрой (или
удовлетворяющей $SMN$-свойству, или супермонотонной), если
\begin{equation}
\label{supmonot}
\begin{array}{c}
\forall \th \ge \th' \quad \forall q \in Z^{[0,1]} \quad \mbox{ функция }
\\
u(\th,z,q) - u(\th',z,q)
\\
\mbox{ неотрицательна и неубывает по } z.
\end{array}
\end{equation}

Интуиция, стоящая за этими определениями, подробно изложена в основном тексте
работы. Если некоторая игра обладает обоими свойствами, то она называется
$S$-игрой, или супермодулярной игрой (потому что эти свойства очень похожи на
свойство супермодулярности, изучаемое в кооперативной теории игр; см. также
(Topkis~1998)).

Обозначим за $q|_{T}$ ограничение профиля $q$ как функции на подмножество
$T \subset [0,1]$, то есть, $q|_{T} = \{q(\th) | \th \in T\}$.

{\bf\em Определение 3.} Игра~(\ref{game}) называется $I$-игрой (иначе,
удовлетворяющей $I$-свойству, или итеративной), если
\begin{equation}
\label{iter34}
\begin{array}{c}
\forall \th \in [0,1], \,\, \forall z \in Z, \,\, \forall q \in \Re \,\,
(\mbox{то есть, для монотонных профилей})
\\
\mbox{ мы имеем } \, u(\th,z,q) = u(\th,z,q|_{[0,\th)});
\end{array}
\end{equation}
иными словами, выигрыш агента зависит только от выборов предыдущих агентов,
относительно естественного упорядочения (плюс, конечно, от его собственной).

Игры~(\ref{game}), удовлетворяющие всем трём введённым выше свойствам,
называются $SIM$-играми (что переводится как {\em супермодулярные 
итеративные игры со множеством участников}). Следующая теорема постулирует 
фундаментальное свойство таких игр.

\begin{enviro}\label{mainfoc}
Каждая $SIM$-игра имеет (в общем случае, единственное) сильное 
Нэш-равновесие. Это равновесие может быть получено итеративной 
процедурой, посредством применения функции максимального 
наилучшего ответа игроков, шаг за шагом, начиная с игрока с номером $0$,
и кончая игроком с номером $1$ (что потребует, в общем случае, континуального
числа шагов; в реальности, тем не менее, существует лишь конечное число типов
агентов, следовательно, и конечное число шагов), к профилю $I \equiv 1$,
являющемуся супремумом всей решётки $\Re$ монотонных профилей.
\end{enviro}

{\bf Доказательство.} В дальнейшем нам понадобится следующее утверждение,
являющейся аналогом известной {\em теоремы о маргинальных значениях} 
для монотонного случая. Доказательство совершенно тривиальное, и будет 
опущено (верность утверждения немедленно следует из графических 
рассмотрений. В сильно более общей ситуации см. (Topkis 1978)).

\begin{envi}\label{envel}
Пусть задана функция $u=u(z)$, определённая на вполне упорядоченном множестве 
$Z$. Обозначим за $A(u)$ максимальный элемент подмножества $Argmax (u) := 
Arg\max\limits_{z \in Z} u(z)$; за $M(u)$~--- максимальное значение функции $u$ 
на множестве $Z$ (мы предполагаем, что оба числа корректно определены). Пусть
$\delta (z)$~--- неотрицательная и неубывающая функция, определённая на 
множестве $Z$. Тогда выполняются следующие неравенства:
\begin{equation}
\label{enve}
\begin{array}{c}
A(u) \le A(u+\delta);
\\
M(u) \le M(u+\delta).
\end{array}
\end{equation}
\end{envi}

Теперь мы введём в рассмотрение соответствие наилучшего ответа $f: Z^{[0,1]} 
\Longrightarrow Z^{[0,1]}$ следующим образом: для $q \in Z^{[0,1]}$ 
\begin{equation}
\label{bestr}
f(q)=\{q' \in Z^{[0,1]}: \forall \th \quad q'(\th) \in 
Arg\max\limits_{z \in Z} u(\th,z,q).
\end{equation}
Иными словами, это~--- обыкновенное многозначное отображение наилучшего
ответа. Кроме того, нам понадобится следующее однозначное отображение, или
просто функция $\bar f$, которая является {\em наибольшим из наилучших 
ответов}:
\begin{equation}
\label{bestr12}
\forall \th \quad \bar f(q)(\th) = A(u(\th,z,q)),
\end{equation}
применённое к функции $u(\th,z,q)$, рассматриваемой как функция переменного
$z$ (см. обозначения, введённые выше в Лемме~\ref{envel}).

Следующее утверждение непосредственно следует из Леммы~\ref{envel}, с учётом
SMD- и SMM-свойств:

\begin{envi}\label{fact}
\begin{enumerate}

\item Для любого профиля $q$ существует по крайней мере один неубывающий
профиль $q' \in f(q)$; к примеру, таков профиль $\bar f(q) \in f(q)$;

\item Отображение $\bar f$ является неубывающим преобразованием решётки
$\Re$ (согласно предыдущему утверждению, это отображение действительно
переводит решётку монотонных профилей в себя);

\item Для любого профиля $q$ и любого $z \in Z$, при $\th' \ge \th$ мы имеем
$u(\th',z,q) \ge u(\th,z,q)$;

\item Для любого $\th$ и любого $z$, при $q' \succeq q$ мы имеем
$u(\th,z,q') \ge u(\th,z,q)$.

\end{enumerate}
\end{envi}

Следующий шаг состоит в применении к однозначному и монотонному отображению 
$\bar f$ полной решётки $\Re$ в себя знаменитой теоремы Тарского, вариант
которой приводится ниже (см. (Tarskii~1955)).

\begin{enviro}\label{tarskii}
({\bf Биркгофф~--- Кнастер~--- Тарский.}) Множество неподвижных точек
монотонного отображения $h$ любой полной решётки $\Gamma$ в себя непусто
и образует полную подрешётку в последней (точнее, является полной
решёткой относительно того же упорядочения). ТВГ подрешётки равновесий
является трансфинитным пределом последовательности
\begin{equation}
\label{limit}
I, h(I), h(h(I)), \dots,
\end{equation}
где $I$~--- ТВГ исходной полной решётки $\Gamma$.
\end{enviro}

В рассматриваемой ситуации это означает, что множество равновесий Нэша,
в которых каждый агент выбирает максимальный из равнозначных для него выборов,
является полной подрешёткой в решётке $\Re$. Максимальное из них может быть
получено итеративным применением отображения $\bar f$ к супремуму всей 
решётки. Однако, существуют ещё равновесия Нэша, помимо описанных, которые
являются неподвижными точками исходного соответствия $f$. Следующее 
утверждение окажется полезным при доказательстве существования и 
единственности СНР.

Утверждение 1. Максимальная неподвижная точка отображения $\bar f$ 
является супремумом множества всех равновесий Нэша в рассматриваемой 
SIM-игре.

Для доказательства этого утверждения нам понадобится следующая лемма.

\begin{envi}\label{lemma3}
Пусть $\Gamma$~--- полная решётка, $h: \Gamma \to \Gamma$~--- монотонное
отображение, и $r \in \Gamma$ обладает свойством $h(r) \succeq r$. Тогда
ТВГ $\bar r$ множества неподвижных точек обладает свойством 
$\bar r \succeq r$.
\end{envi}

{\bf Доказательство} получается переходом к трансфинитному пределу в
очевидном равенстве $I \succeq r$, где $I$ обозначает ТВГ всей решётки
$\Gamma$. Например, первый шаг таков: $h(I) \succeq h(r) \succeq r$,
поэтому $h(I) \succeq r$, и так далее. Доказательство закончено.

Теперь рассмотрим любое равновесие $\tilde q$, то есть,
неподвижную точку многозначного отображения $f$. Мы утверждаем, что
\begin{equation}
\label{prop1}
\bar f (\tilde q) \succeq \tilde q,
\end{equation}
потому что $\forall \th$ по определению равновесия имеем $\tilde q(\th) 
\in f(\tilde q) (\th)$, а по определению $\bar f$ левая часть~(\ref{prop1}) 
есть максимальный элемент множества $f(\tilde q) (\th)$. Следовательно, к 
профилю $\tilde q \in \Re$ применима Лемма~\ref{lemma3}, с заменой отображения 
$h$ на отображение $\bar f$. А, значит, ТВГ множества неподвижных точек 
отображения $\bar f$ является одновременно ТВГ множества всех вообще 
равновесий, соответствующих выбранной стратегии $\ad$. Доказательство
утверждения 1 закончено.

Теперь мы собираемся доказать, что это максимальное равновесие по Нэшу
является единственным СНР в рассматриваемой SIM-игре. Чтобы это сделать, нам
необходимо подменить итеративный процесс~(\ref{limit}) процессом, который
гораздо легче анализировать. С целью упрощения выкладок, а также чтобы
избежать ссылки на трансфинитные соображения, мы предположим, что существует
конечное число $n$ различных типов агентов, но каждый из типов по-прежнему 
представлен континуумом агентов (чтобы сохранить предположение о 
несущественности индивидуальных решений с точки зрения агрегированных
переменных). Пусть агенты $i$-того типа имеют коррупционные возможности
$b(\th)=b_i$. Обозначим максимальное равновесие за 
$q^* = (z^*_1,\dots,z^*_n)$ (ясно, что агенты одинакового типа выберут 
одинаковое $z$ в равновесии). Пусть $I$, как и раньше, обозначает супремум
множества $\Re$ всех монотонных профилей, то есть, $I \equiv 1$.

Следующая теорема доказывается долго и муторно, хотя по сути дела выражает
вполне интуитивно понятный факт.

\begin{enviro}\label{itera3}
Максимальное равновесие $q^*$ может быть получено из профиля $I$ путём
применения следующей итеративной процедуры:
\begin{equation}
\label{itera}
\begin{array}{c}
I = (1, 1, \dots, 1) \to (z^*_1, 1, 1, \dots, 1) \to
\\
(z^*_1, z^*_2, 1, \dots, 1) \to \cdots \to
(z^*_1, z^*_2, \dots, z^*_n),
\end{array}
\end{equation}
где
\begin{equation}
\label{iter}
\begin{array}{c}
z^*_1 = \bar f (I) (\th_1),
\\
z^*_2 = \bar f (z^*_1, 1, \dots, 1) (\th_2),
\\
\ldots
\\
z^*_i = \bar f (z^*_1, \dots, z^*_{i-1}, 1, \dots, 1) (\th_i),
\\
\ldots,
\\
z^*_n = \bar f (z^*_1, \dots, z^*_{n-1}, 1) (\th_n).
\end{array}
\end{equation}
\end{enviro}
Здесь $\th_i$~--- такое, что $b(\th_i) = b_i$. Заметим, что искомый
равновесный профиль достигается не более, чем за $n$ итераций.

{\bf Доказательство.}

Прежде всего, введём ряд обозначений. Профиль 
$(z_1,z_2,\dots,z_i,1,1,\dots,1)$ будет вкратце обозначаться за 
$(z_1,\dots,z_i, I)$. Более общо, если есть профиль 
$\tilde q = (\tilde z_1,\dots,\tilde z_n)$ и набор чисел $z_1,\dots,z_i$,
то под профилем $(z_1,\dots,z_i, \tilde q)$ понимается профиль
$(z_1,z_2,\dots,z_i, \tilde z_{i+1},\dots,\tilde z_{n})$. Наконец,
переобозначим изучаемое монотонное отображение $\bar f : \Re \to \Re$
просто за $h$.

Ниже вводится серия подмножеств множества $\Re$ всех (монотонных) профилей.
А именно, $\forall i$ положим по определению
\begin{equation}
\label{srez}
\begin{array}{c}
R_i = \{q = (z_1,z_2,\dots,z_n) \in \Re \, |
\, h(q) \preceq q,
\\
{\mbox и} \,\, \forall j=1,2,\dots,i
\quad h(q)(\th_j) = q(\th_j) = z_j.
\end{array}
\end{equation}
Таким образом, $R_i$ состоит из тех профилей, которые, во-первых,
удовлетворяют {\em условию монотонности} (в дальнейшем кратко: УМ), и
во-вторых их превые $i$ компонент устойчивы относительно отображения $h$.
Такие профили мы назовём {\em $i$-равновесиями}. Очевидно, что 
$I \in R_0$ (потому что последнее состоит просто из всех профилей, 
удовлетворяющих условию монотонности); последнее из множеств, $R_n$, 
совпадает со множеством всех неподвижных точек отображения $h$.

В дальнейшем окажется важной следующая лемма.

\begin{envi}\label{lemma5}
Отображение $h$ переводит подмножество $R_i$ внутрь $R_{i+1}$. Иными
словами, $\forall q \in R_i \quad h(q) \in R_{i+1}$.
\end{envi}

Для начала установим, что если профиль $q$ удовлетворяет УМ, то и его
образ тоже; иными словами, отображение $h$ переводит множество профилей,
удовлетворяющих УМ, внутрь себя. Действительно, если
$h(q) \preceq q$, то, воспользовавшись монотонностью
самого отображения $h$, получаем, что $h(h(q)) \preceq h(q)$,
то есть, что $h(q)$ удовлетворяет УМ.

Чтобы доказать, что образ $i$-равновесия является $(i+1)$-равновесием,
теперь осталось проверить, что если у профиля, удовлетворяющего УМ,
первые $i$ компонент устойчивы относительно отображения $h$, то у его
$h$-образа устойчивы первые $i+1$ компонент. Введём обозначения:
\begin{equation}
\label{justa3}
\begin{array}{c}
q=(z_1,\dots,z_i,z'_{i+1},\dots,z'_n);
\\
h(q)=(z_1,\dots,z_i,z_{i+1},z''_{i+2},\dots,z''_n)
\end{array}
\end{equation}
В силу условия монотонности имеем $z'_{i+1} \ge z_{i+1}$, и все $z'_j$ и
$z''_j$ при $j \ge i$ тем более не меньше, чем $z_{i+1}$ (мы используем
монотонность самих профилей $q$ и $h(q)$), значит, распределения $F$ и
$h(F)$, соответствующие профилям $q$ и $h(q)$, совпадают на {\em интервале}
$[0,z_{i+1})$. Поэтому можно вспомнить и применить третий пункт
леммы~\ref{fact}, и заключить, что на {\em отрезке} $[0,z_{i+1}]$
функции выигрыша агента как функции его выбора, $z$ совпадают при
реализации профилей $q$ и $h(q)$, соответственно. В то же время, в силу
утверждения 2) той же теоремы, функция выигрыша любого агента при вере
в профиль $h(q)$ нигде не превосходит функцию его выигрыша при реализации
профиля $q$. Отсюда ясно, что если при реализации профиля $q$ выбор
агента принадлежал отрезку $[0,z_{i+1}]$, то он не изменится. Но этому
условию удовлетворяют по меньшей мере те агенты $\th$, для которых
$b(\th) \le b_{i+1}$, то есть, первые $i+1$ типов агентов. Поэтому
первые $i+1$ компонент профиля $h(h(q))$ совпадают с первыми $i+1$
компонентами профиля $h(q)$, иными словами, $h(q) \in R_{i+1}$.
Лемма~\ref{lemma5} доказана.

{\bf Следствие.} Если профиль $\tilde q \in R_0$, то есть, удовлетворяет
условию монотонности, то процесс итеративного применения к нему отображения
$h$ сходится к равновесию не более, чем за $n$ шагов, где $n$~--- число
агентов различных типов. В частности, процесс
\begin{equation}
\label{ihih}
I \to h(I) \to h(h(I)) \to \dots
\end{equation}
сходится к ТВГ множества равновесий не более, чем за $n$ шагов.

Тем не менее, это ещё не совсем то, что нам надо, так как наш процесс
сходимости, удобный для анализа ситуации, несколько отличается от простого
итеративного применения отображения $h$ к профилю $I$. Следующая лемма
завершает доказательство теоремы~\ref{itera3}.

\begin{envi}\label{proc17}
Для любого профиля $\bar q = (\bar z_1,\dots,\bar z_n)$, удовлетворяющего
УМ (т.е лежащего в $R_0$), и для любого $i=1,2,\dots,n$, профиль
$(z^*_1,z^*_2,\dots,z^*_i, \bar q)$\footnote{См. обозначения, введённые
в начале доказательства теоремы~\ref{itera3}.} содержится в $R_i$.
Здесь $z^*_j, \,\, j=1,2,\dots,n$ определяются по индукции следующим
образом:
\begin{equation}
\label{quji}
\begin{array}{c}
z^*_1 = h(\bar q) (\th_1),
\\
\dots
\\
z^*_j = h(z^*_1,\dots,z^*_{j-1}, \bar q) (\th_j),
\\
\dots
\\
z^*_n = h(z^*_1,\dots,z^*_{n-1},\bar z_n) (\th_n).
\end{array}
\end{equation}
\end{envi}

Доказательство мы проведём индукцией по $i$. Докажем базу индукции $i=1$.
(Формально говоря, базой является $i=0$, и её доказывать нечего; однако
для наглядности проведём рассуждение при $i=1$ подробно.)

Распишем профиль $h(z^*_1, \bar q)$ покомпонентно:
\begin{equation}
\label{rospis}
h(z^*_1, \bar q) := (z^*_1,\tilde z^1_2,\dots,\tilde z^1_n) :=
(z^*_1, \tilde q^1)
\end{equation}
Имеем следующее двойное неравенство, непосредственно следующее из УМ,
которому удовлетворяет профиль $\bar q$:
\begin{equation}
\label{doub}
h(\bar q) = (z^*_1, \tilde q^1)
\preceq (z^*_1, \bar q) \preceq \bar q.
\end{equation}
Применим к нему отображение $h$, пользуясь монотонностью последнего:
\begin{equation}
\label{doub1}
h(h(\bar q)) = h(z^*_1, \tilde q^1) \preceq
h(z^*_1, \bar q) \preceq h(\bar q);
\end{equation}
Теперь рассмотрим первые компоненты крайних профилей, и применим
лемму~\ref{lemma5} (согласно которой $h(\bar q) \in R_1$), наряду
с определением $z^*_1$:
\begin{equation}
\label{fire}
h(h(\bar q)) (\th_1) = h(\bar q) (\th_1) = z^*_1.
\end{equation}
Из~(\ref{doub1}) и~(\ref{fire}) следует, что
\begin{equation}
\label{immor}
h(z^*_1, \bar q) (\th_1) = z^*_1,
\end{equation}
что означает, что первая компонента профиля $(z^*_1, \bar q)$ устойчива
относительно $h$.

Чтобы доказать, что этот профиль лежит в $R_1$, осталось установить, что
остальные его компоненты под действием $h$ не возрастут. Для этого
применим к неравенству $(z^*_1, \bar q) \preceq \bar q$, следующему
из УМ для исходного профиля $\bar q$ и определения $z^*_1$
(см. формулу~(\ref{quji}), отображение $h$, и подставим в
полученное неравенство значение $\th_j$ для $j = 2,\dots,n$:
\begin{equation}
\label{ture}
h(z^*_1, \bar q) (\th_j) \le h(\bar q) (\th_j)
\le \bar z_j = (z^*_1, \bar q) (\th_j).
\end{equation}
Здесь мы воспользовались тем, что профили $\bar q$ и $(z^*_1, \bar q)$
совпадают на всех компонентах $j \ge 2$. Суммируя, получаем
$(z^*_1, \bar q) \in R_1$.

Теперь проведём шаг индукции. Он практически не отличается от первого шага.
Распишем профиль $h(z^*_1,\dots,z^*_i, \bar q)$ покомпонентно,
предполагая, что утверждение леммы верно для всех $j \le i$:
\begin{equation}
\label{rospis1}
h(z^*_1,\dots,z^*_i, \bar q) :=
(z^*_1,\dots,z^*_i,z^*_{i+1}, \tilde q).
\end{equation}
Вместо неравенства~(\ref{doub}) мы пишем неравенство
\begin{equation}
\label{doub7}
\begin{array}{c}
h(z^*_1,\dots,z^*_i, \bar q)) =
(z^*_1,\dots,z^*_i,z^*_{i+1}, \tilde q^i) \preceq
\\
(z^*_1,\dots,z^*_i,z^*_{i+1}, \bar q)
\preceq (z^*_1,\dots,z^*_i, \bar q).
\end{array}
\end{equation}
Опять-таки, первое неравенство следует из определения~(\ref{quji}), а
последнее~--- из УМ для профиля $(z^*_1,\dots,z^*_i, \bar q)$,
применённого к компонентам с номерами $j = i+1,\dots,n$ (верного,
согласно индукционному предположению). Применяя к двойному
неравенству~(\ref{doub7}) отображение $h$, рассматривая $(i+1)$-ю
компоненту всех профилей и используя индукционное предположение,
заключаем совершенно аналогично случаю $i=1$, что среднее число
заключено между крайними, равными друг другу и $z^*_{i+1}$.
Тем самым, рассматриваемый профиль устойчив не только по первым $i$
компонентам, что следует из индукционного предположения, но и по
$(i+1)$-й тоже. Доказательство УМ для него практически дословно повторяет
рассуждение, проведённое для базы индукции. Тем самым лемма~\ref{proc17}
доказана.

{\bf Следствие.} Профиль $(z^*_1,\dots,z^*_n)$, где $z^*_j$ определены
посредством~(\ref{quji}), является равновесным.

Осталось понять, почему это равновесие (обозначим его за $q^*$)
совпадает с тем, которое получается итеративным применением
отображения $h$ к начальному профилю $\bar q$.

Обозначим последнее равновесие за $\hat q$. Вначале покажем, что
$q^* \preceq \hat q$. В самом деле, мы имеем
$q^* \preceq \bar q$~--- в силу свойства УМ, сохраняемого на каждом
шаге определения профиля $q^*$. Применим $n$ раз к этому неравенству
отображение $h$. Слева стоит равновесие, поэтому оно так и будет там
стоять. Справа же через $n$ шагов окажется как раз $\hat q$.

Для доказательства обратного утверждения всмотримся внимательно в
диаграмму, воспроизведённую ниже для случая трёх типов агентов и
профиля $\bar q = I$ (ситуация ничем не отличается от общего случая
конечного числа агентов, и произвольного профиля $\bar q \in R_0$).
Косые стрелки между первым и вторым рядом заменяют знак $\preceq$, именно
в этом направлении. Применение $h$ означает сдвиг на одну строку вниз,
и направление стрелок не меняется (монотонность). Горизонтальные и
вертикальные неравенства служат лишь для полноты картины, для обогащения
интуиции. Свойство транзитивности отношения $\preceq$ позволяет заключить,
что $\hat q \preceq q^*$. Следовательно, $q^* = \hat q$.

\input{pict5.tex}

\bigskip

Для завершения доказательства второго утверждения теоремы~\ref{itera3}
остаётся лишь положить $\bar q = I$, как на картинке.

Приступая к доказательству первого утверждения, прежде всего заметим, что
ТВГ множества равновесий является единственным кандидатом на коалиционную
устойчивость. Действительно, сильный Нэш~--- это по крайней мере Нэш,
значит, искать надо в решётке всех Нэш-равновесий. Рассмотрим два
равновесия $q=(z_1,\dots,z_n)$ и $q'=(z'_1,\dots,z'_n)$ таких, что
$q' \ge q$. Имеем для выигрышей агентов
\begin{equation}
\label{uniq3}
u_i(z_i; q) \le u_i(z_i; q') \le u_i(z'_i; q'),
\end{equation}
где первое неравенство~--- следствие леммы~\ref{fact}, а второе выражает
тот факт, что $q'$ является равновесием. Если профили не совпадают, то по
крайней мере одно из неравенств~--- строгое хотя бы для одного $i$
(а именно, для того, в каком месте профили $q$ и $q'$ впервые различаются).
Значит, коалиция, состоящая из всех участников вместе, предпочитает
большее равновесие меньшему. Так как существует ТВГ, то любое другое
равновесие блокируется всеобщей коалицией (иначе говоря, ТВГ является
единственным Парето-оптимальным равновесием).

Чтобы доказать, что ТВГ $q^*$ не только Парето-оптимально среди равновесий,
но и является сильным Нэш-равновесием, допустим противное и фиксируем
произвольную {\em блокирующую коалицию} $S \subset [0,1]$, вместе с
набором {\em блокирующих значений} $\{z'(\th) | \th \in S\}$.\footnote{Членам
коалиции даже разрешено предписывать различные значения частот, независимо
от того, являются ли различными их коррупционные возможности.}

\begin{envi}\label{tyt}
Все блокирующие значения частот $z'(\th)$ не превышают равновесные
$z^*_i$ для соответствующих $I$ (т.е. таких, что $b(\th) = b_i$).
\end{envi}

{\em Доказательство.}
Действительно, пусть это не так, и $j \in N$~--- самый маленький индекс,
для которого существуют $\th$ со свойствами $b(\th)=b_j, \,\, z'(\th) >
z^*_j$. Обозначим за $\th'$ одного из таких членов коалиции, за $\hat q$
весь блокирующий профиль, то есть тот, в котором членам коалиции предписаны
соответствующие значения частот, а остальным агентам~--- равновесные,
и за $\tilde q$~--- профиль, получающийся из $\hat q$ заменой на местах
$\{\th | b(\th) < b_j\}$ предписанных значений просто равновесными значениями
$z^*_l, \,\, l=1,\dots,j-1$. По предположению имеем $\hat q \le \tilde q$.

По свойству коалиции $S$ должно быть
\begin{equation}
\label{koal45}
\forall \th \in S \quad u(\th; z'(\th); \hat q) \ge u(\th; q^*(\th); q^*).
\end{equation}
Однако $\forall z > z_j$ можно выписать следующую цепочку неравенств, из
которых третье является {\em строгим}, в силу предположения о максимальности
равновесия $q^*$, подразумевающего, что каждому агенту в нём предписано
{\em максимальное} из равноценных для него значений частот, а остальные
являются следствиями различных пунктов леммы~\ref{fact}:
\begin{equation}
\label{last5}
\begin{array}{c}
u(\th'; z; \hat q) \le u(\th'; z; \tilde q) \le
u(\th'; z; (z^*_1,\dots,z^*_{j-1},I)) <
\\
< u(\th'; z^*_j; (z^*_1,\dots,z^*_{j-1},I)) = u(\th'; z^*_j; z^*);
\end{array}
\end{equation}
в частности это верно и для $z = z'(\th)$, что противоречит свойству
блокирующей коалиции~(\ref{koal45}). Лемма~\ref{tyt} доказана.

Но если все блокирующие значения не превосходят равновесных, то и
выигрыши тоже, ибо опять-таки в силу леммы~\ref{fact} имеем
$\forall \th \in S$
\begin{equation}
\label{lastla}
u(\th; z'(\th); \hat q) \le u(\th; z'(\th); q^*) \le
u(\th; q^*(\th); q^*).
\end{equation}

Полученное противоречие завершает доказательство теоремы~\ref{itera3}.